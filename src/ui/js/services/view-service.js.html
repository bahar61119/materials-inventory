<script>
    class ViewService {
        static get FunctionName() {
            let functionName = name => `${ViewService.name}.${name}()`
            return {
                loadHomeView: functionName(ViewService.loadHomeView.name),
                loadSupplierListView: functionName(ViewService.loadSupplierListView.name),
                loadAddSupplierView: functionName(ViewService.loadAddSupplierView.name),
                loadEditSupplierView: functionName(ViewService.loadEditSupplierView.name)
            }
        }

        static #setHtml(html, id = ElementId.Main.APP) {
            document.getElementById(id).innerHTML = html;
        }

        static #errorHandler(error) {
            console.error(error);
            Alert.show(
                AlertOptions.of()
                    .withTitle("Error")
                    .withMessage(error.message)
                    .withType(AlertOptions.Type.DANGER)
            );
        }

        static #clear() {
            ViewService.#setHtml("");
            Alert.hide();
            Spinner.hide();
        }

        static loadHomeView() {
            ViewService.#clear();
            API.loadHomeView(
                html => {
                        ViewService.#setHtml(html);
                },
                ViewService.#errorHandler
            );
            BrowserHistory.setHistory(
                BrowserHistoryOptions.of()
                    .withFunctionName(ViewService.FunctionName.loadHomeView)
            );
        }

        static loadSupplierListView() {
            ViewService.#clear();
            API.loadSupplierListView(
                html => {
                        ViewService.#setHtml(html);
                        SupplierService.setDataForSupplierSearch();
                },
                ViewService.#errorHandler
            );

            BrowserHistory.setHistory(
                BrowserHistoryOptions.of()
                    .withFunctionName(ViewService.FunctionName.loadSupplierListView)
                    .withHash(BrowserHistoryOptions.Url.SUPPLIER_LIST)
            );
        }

        static loadAddSupplierView() {
            ViewService.#clear();
            API.loadAddSupplierView(
                ViewService.#setHtml,
                ViewService.#errorHandler
            );

            BrowserHistory.setHistory(
                BrowserHistoryOptions.of()
                    .withFunctionName(ViewService.FunctionName.loadAddSupplierView)
                    .withHash(BrowserHistoryOptions.Url.SUPPLIER_ADD)
            );
        }

        static loadEditSupplierView(supplierId) {
            ViewService.#clear();
            API.loadEditSupplierView(
                supplierId,
                ViewService.#setHtml,
                ViewService.#errorHandler
            );

            BrowserHistory.setHistory(
                BrowserHistoryOptions.of()
                    .withFunctionName(ViewService.FunctionName.loadEditSupplierView)
                    .withFunctionArguments(supplierId)
                    .withParams({
                        supplierId
                    })
                    .withHash(BrowserHistoryOptions.Url.SUPPLIER_EDIT)
            );
        }
    }
</script>