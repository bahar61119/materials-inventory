<script>
    class SupplierService {
        static #supplierList = [];

        static setDataForSupplierSearch() {
            API.getSupplierList(
                dataReturned => {
                    SupplierService.#supplierList = dataReturned.slice();
                    SupplierService.searchSupplier();
                },
                error => {
                    console.error(error);
                    Alert.show();
                }
            );
        }

        static searchSupplier() {
            let searchInput = document.getElementById(ElementId.SupplierList.SUPPLIER_LIST_SEARCH).value;
            let results = DataManipulation.filterData(searchInput, SupplierService.#supplierList);
            let supplierListTable = document.getElementById(ElementId.SupplierList.SUPPLIER_LIST_TABLE);

            supplierListTable.innerHTML = "";
            results.forEach(result => {
                let tr = SupplierService.getTemplate(ElementId.SupplierList.SUPPLIER_LIST_ROW_TEMPLATE);
                Object.keys(result).forEach(column => {
                    tr.querySelector(`.${column}`).textContent = result[column].toString();
                })
                supplierListTable.appendChild(tr);
            });
        }

        static getTemplate(templateId) {
            let template = document.getElementById(ElementId.SupplierList.SUPPLIER_LIST_ROW_TEMPLATE).content;
            return template.cloneNode(true);
        }
    }
</script>